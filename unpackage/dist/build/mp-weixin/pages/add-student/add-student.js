"use strict";const e=require("../../common/vendor.js"),r=require("../../store/student.js"),a=require("../../utils/constant.js");var s="https://lesson-api.jc-talent.com";if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-data-checkbox")+e.resolveComponent("uni-data-select")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.js")+(()=>"../../uni_modules/uni-data-select/components/uni-data-select/uni-data-select.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const n={__name:"add-student",setup(n){const o=r.useStudentStore(),t=e.reactive({}),u=e.ref(),l=e.reactive({name:{rules:[{required:!0,errorMessage:"姓名不能为空"}]},gender:{rules:[{required:!0,errorMessage:"性别不能为空"}]},remainHours:{rules:[{required:!0,errorMessage:"课时不能为空"},{format:"number",errorMessage:"课时只能输入数字"}]},subjects:{rules:[{required:!0,errorMessage:"科目不能为空"}]},phone:{rules:[{required:!0,errorMessage:"手机号不能为空"}]}}),i=async()=>{if(u.value){await u.value.validate()&&e.index.request({url:`${s}/students`,method:"POST",data:t,success:()=>{e.index.showToast({title:t.id?"修改成功":"添加成功",icon:"success"}),setTimeout((()=>{o.setStudent(t),e.index.navigateBack()}),1500)}})}};return e.onLoad((r=>{r.studentId||o.reset(),Object.assign(t,e.toRaw(o.$state))})),(r,s)=>({a:e.o((e=>t.name=e)),b:e.p({placeholder:"请输入姓名",modelValue:t.name}),c:e.p({label:"姓名","label-width":"70",required:!0,name:"name"}),d:e.o((e=>t.gender=e)),e:e.p({mode:"tag",localdata:e.unref(a.genderOptions),modelValue:t.gender}),f:e.p({label:"性别","label-width":"70",required:!0,name:"gender"}),g:e.o((e=>t.remainHours=e)),h:e.p({type:"number",placeholder:"请输入课时",modelValue:t.remainHours}),i:e.p({label:"课时","label-width":"70",required:!0,name:"remainHours"}),j:e.o((e=>t.grade=e)),k:e.p({localdata:e.unref(a.gradeOptions),placeholder:"请选择年级",modelValue:t.grade}),l:e.p({label:"年级","label-width":"70",required:!0,name:"grade"}),m:e.o((e=>t.subjects=e)),n:e.p({mode:"tag",multiple:!0,localdata:e.unref(a.subjectOptions),modelValue:t.subjects}),o:e.p({label:"科目","label-width":"70",required:!0,name:"subjects"}),p:e.o((e=>t.phone=e)),q:e.p({placeholder:"请输入联系方式",modelValue:t.phone}),r:e.p({label:"手机","label-width":"70",required:!0,name:"phone"}),s:e.o((e=>t.remark=e)),t:e.p({type:"textarea",placeholder:"请输入备注信息",modelValue:t.remark}),v:e.p({label:"备注","label-width":"70",name:"remark"}),w:e.o(i),x:e.sr(u,"6539ff0c-0",{k:"form"}),y:e.p({rules:l,model:t})})}};wx.createPage(n);
