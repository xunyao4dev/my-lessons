"use strict";const e=require("../../../../common/vendor.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const t={__name:"editable-select",props:{options:Array,selected:String,placeholder:String,title:String,saveOptions:Function},emits:["update:selected","update:options"],setup(t,{emit:o}){const a=t,l=o,i=e.ref(!1),n=e.ref(a.selected||""),u=e.ref(""),s=e.ref(-1),r=e.ref(!1),p=e.ref(),v=e.reactive(Array.from({length:a.options.length},(()=>""))),c=()=>{i.value=!0},d=()=>{i.value=!1,u.value="",s.value=-1,v.forEach(((e,t)=>{v[t]=""}))},f=()=>{l("update:selected",n.value),r.value&&a.saveOptions(),r.value=!1,d()},m=()=>{if(u.value.trim()){if(a.options.includes(u.value))return void e.index.showToast({title:"选项不能重复",icon:"error"});const t=[...a.options,u.value];l("update:options",t),r.value=!0}u.value="",p.value="item"+(a.options.length-1)};return(o,h)=>e.e({a:!t.selected},t.selected?{c:t.selected}:{b:e.t(t.placeholder)},{d:e.o(c),e:i.value},i.value?e.e({f:e.o(d),g:e.t(t.title||""),h:e.o(f),i:e.f(t.options,((t,o,i)=>e.e({a:s.value!==o},s.value!==o?e.e({b:e.t(t),c:t===n.value},(n.value,{}),{d:"2a4e45f3-0-"+i,e:e.p({"custom-prefix":"iconfont",type:"icon-bianji"}),f:e.o((e=>(e=>{s.value=e,v[e]=a.options[e],r.value=!0})(o)),o),g:"item"+o,h:e.o((e=>((e,t)=>{n.value=e===n.value?"":e,p.value="item"+t})(t,o)),o)}):{i:v[o],j:e.o((e=>v[o]=e.detail.value),o),k:"2a4e45f3-1-"+i,l:e.p({type:"checkmarkempty",color:"green"}),m:e.o((e=>(e=>{if(v[e].trim()){const t=[...a.options];t[e]=v[e],l("update:options",t)}s.value=-1})(o)),o)},{n:o,o:e.n({"editing-item":s.value===o})}))),j:0===t.options.length},(t.options.length,{}),{k:p.value,l:u.value,m:e.o((e=>u.value=e.detail.value)),n:e.p({type:"checkmarkempty",color:"#fff"}),o:e.o(m)}):{})}},o=e._export_sfc(t,[["__scopeId","data-v-2a4e45f3"]]);wx.createComponent(o);
